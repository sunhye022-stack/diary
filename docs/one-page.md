# 개인용 다이어리 웹 애플리케이션 기획서

## 1. 프로젝트 개요
### 1.1 프로젝트 소개
개인용 다이어리 웹 애플리케이션은 사용자가 일상생활을
기록하고 관리할 수 있는 디지털 다이어리입니다.
프로젝트 이름은 "데이브러리(Daybrary)"입니다.
사용자는 글과 이미지를 포함한 풍부한 콘텐츠를 작성하고,
감정과 날씨를 이모티콘으로 표현할 수 있습니다.
또한 제목과 내용 검색, 날짜별 필터링을 통해 과거 기록을 쉽게 찾아볼 수 있습니다.

### 1.2 프로젝트 목표
- 사용자 친화적인 인터페이스로 손쉽게 일기를 작성하고 관리할 수 있는 환경 제공
- 리치 텍스트 에디터를 통한 다양한 형식의 콘텐츠 작성 지원
- 효율적인 검색 및 필터링 기능으로 과거 기록 접근성 향상
- 반응형 디자인으로 다양한 디바이스에서 일관된 사용자 경험 제공

### 1.3 타겟 사용자
- 개인적인 일상과 감정을 기록하고자 하는 사용자
- 디지털 방식으로 일기를 관리하고자 하는 사용자
- 과거 기록을 쉽게 찾아보고 싶은 사용자

## 2. 시스템 구조
### 2.1 기술 스택

- **프론트엔드**
  - Next.js 15 (App Router)
  - React 19
  - TypeScript
  - Tailwind CSS
  - shadcn/ui
  - Tiptap 리치 텍스트 에디터

- **백엔드**
  - Next.js Server Components
  - Next.js Server Actions
  - Supabase

- **데이터베이스 및 스토리지**
  - Supabase PostgreSQL
  - Supabase Storage (이미지 저장)

### 2.2 시스템 아키텍처
- **클라이언트 사이드**
  - React 컴포넌트
  - Tailwind CSS 스타일링
  - 클라이언트 상태 관리

- **서버 사이드**
  - Next.js Server Actions를 통한 데이터 처리
  - Supabase 클라이언트를 통한 데이터베이스 및 스토리지 접근

- **데이터 레이어**
  - Supabase PostgreSQL 테이블
  - Supabase Storage 버킷

### 2.3 라우팅 구조
- `/` - 메인 페이지 (최근 일기 목록 표시)
- `/diary/[id]` - 특정 일기 상세 보기
- `/diary/[id]/edit` - 특정 일기 수정
- `/new` - 새 일기 작성

## 3. 기능 요구사항
### 3.1 핵심 기능
- **일기 작성**
  - 제목, 내용 입력
  - 리치 텍스트 에디터를 통한 서식 적용
  - 이미지 업로드 (드래그앤드롭, 복사/붙여넣기)
  - 감정 상태 이모티콘 선택 (6가지 옵션: 행복, 슬픔, 화남, 평온, 설렘, 피곤)
  - 날씨 이모티콘 선택 (5가지 옵션: 맑음, 흐림, 비, 눈, 바람)
  - 작성 날짜 설정
- **일기 조회**
  - 메인 페이지에서 최근 일기 목록 최신순 표시
  - 일기 상세 페이지에서 전체 내용 조회
  - 일기 목록에서 간략한 정보(제목, 작성일, 감정/날씨) 표시
  - 일기 내용의 일부를 미리보기로 표시
  - 첫 번째 이미지를 썸네일로 표시
- **일기 수정/삭제**
  - 기존 일기 내용 수정
  - 일기 삭제 기능
  - 삭제 전 확인 대화상자 표시
- **검색 및 필터링**
  - 제목 및 내용 기반 검색
  - 날짜별 일기 필터링 (달력 UI)
  - 일기가 있는 날짜 캘린더에 표시

### 3.2 부가 기능
- **반응형 디자인**
  - 모바일, 태블릿, 데스크톱 환경 지원
  - 화면 크기에 따른 레이아웃 최적화
  - 모바일에서는 햄버거 메뉴로 사이드바 접근
- **에디터 기능**
  - 텍스트 서식 (굵게, 기울임, 밑줄 등)
  - 글머리 기호 및 번호 매기기
  - 인용구, 코드 블록 지원
- **다크모드 지원**
  - 라이트/다크 테마 전환 기능
  - 시스템 설정 기반 자동 테마 적용

## 4. UI/UX 설계
### 4.1 레이아웃 구조
- **공통 레이아웃**
  - 사이드바 (내비게이션, 검색, 달력, 다크/라이트 모드 토글)
  - 메인 콘텐츠 영역
- **메인 페이지**
  - 최근 작성한 일기 목록 그리드/리스트 뷰
  - 새 일기 작성 버튼
  - 일기가 없을 경우 안내 메시지
- **일기 작성/수정 페이지**
  - 제목 입력 필드
  - Tiptap 리치 텍스트 에디터
  - 감정/날씨 선택 UI
  - 저장/취소 버튼
- **일기 상세 페이지**
  - 제목, 작성일, 감정/날씨 표시
  - 일기 내용 표시
  - 수정/삭제 버튼

### 4.2 디자인 시스템
- **색상 팔레트**
  - shadcn/ui 테마 활용
  - 라이트/다크 모드 지원 (사이드바에 토글 버튼으로 전환)
- **타이포그래피**
  - 가독성 중심의 폰트 선택
  - 제목, 본문, 버튼 등 용도별 일관된 텍스트 스타일
- **컴포넌트**
  - shadcn 컴포넌트 활용
  - 일기 카드, 버튼, 입력 필드, 모달 등 일관된 디자인

### 4.3 사용자 경험
- **인터랙션 디자인**
  - 직관적인 내비게이션
  - 드래그앤드롭 이미지 업로드
  - 원활한 트랜지션과 애니메이션
  - 토스트 메시지를 통한 작업 상태 피드백
- **접근성**
  - 키보드 내비게이션 지원
  - 스크린 리더 호환성
  - 시맨틱 HTML 구조

## 5. 데이터베이스 설계
### 5.1 데이터베이스 스키마
- **일기 테이블 (diary)**
  - `id`: UUID (PK)
  - `title`: 문자열 (일기 제목)
  - `content`: JSONB (Tiptap 에디터 내용)
  - `emotion`: 문자열
  - `weather`: 문자열
  - `created_at`: 타임스탬프 (생성 시간)
  - `updated_at`: 타임스탬프 (마지막 수정 시간)
  - `diary_date`: 날짜 (일기 작성 날짜)

### 5.2 스토리지 구조
- **이미지 스토리지 버킷**
  - 각 일기별 이미지 저장
  - 폴더 구조: /{filename}

### 5.3 데이터 관계
- 독립적인 일기 엔티티로 설계 (추가관계 없음)

### 5.4 보안 설정
- **Supabase RLS 정책**
  - 모든 사용자에게 읽기/쓰기 권한 허용 (개인용 프로젝트)
  
- **Storage 버킷 정책**
  - 읽기: 모든 사용자에게 허용
  - 쓰기: 모든 사용자에게 허용
  - 삭제: 모든 사용자에게 허용

## 6. 개발 순서
### 6.1 설계 단계
- Supabase 연결 및 테이블, 스토리지 버킷 생성

### 6.2 사이드바 레이아웃 구현
- 사이드바 UI 구성
- 내비게이션 메뉴 구현
- 다크모드 토글 구현

### 6.3 일기 작성 폼 개발 (1)
- Tiptap 에디터 설치 및 구성
- 일기 생성 기능 연결

### 6.4 일기 작성 폼 개발 (2)
- 에디터 내 이미지 드래그앤드롭 기능 구현
- 복사/붙여넣기 기능 구현
- 사용자 피드백 추가

### 6.5 다이어리 페이지 구성 (1)
- 일기 조회 기능 연결
- 메인 페이지, 일기 상세 페이지 구현

### 6.6 다이어리 페이지 구성 (2)
- 일기 수정/삭제 기능 연결
- 수정 페이지 구현
- 일기 수정/삭제 버튼 추가

### 6.7 검색 기능 구현
- 사이드바 검색 UI 구현
- 제목 검색 기능 연결

### 6.8 날짜별 일기 필터링 구현
- 사이드바 달력 UI 구현
- 날짜별 필터링 기능 연결
